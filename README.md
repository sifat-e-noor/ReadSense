Table of Content

- [About `ReadSense`](#about-readsense)
- [Development Setup](#development-setup)
- [Deployment](#deployment)
- [Data](#data)
  - [User](#user)
  - [Device](#device)
  - [Environment](#environment)
  - [ReadSettingsEvent](#readsettingsevent)
  - [ScrollingEvent](#scrollingevent)

## About `ReadSense`

Millions of individuals worldwide have central visual impairment, a medical condition where the center field of their
vision is blurred. This creates challenges and produces difficulties when they read. To address this, a project ’Reading
the Reader’ aims to use Machine Learning models to interpret and adapt settings for optimal reading experience for
the user. A smaller component of the project ReadSense was
developed. 
ReadSense is a personalized reading experience
analyzer that can be used across various devices including
e-readers, tablet, and smartphones, and in different contexts
such as place, brightness and environment. It aims to analyse user reading patterns and preferences through collecting
data points through logging interactions with the application.
The project underwent several low-fidelity iterations, user
testing through informal evaluations and an experiment, and
then was developed as a high-fidelity functional prototype.


## Development Setup
Peoject comprise of 2 components 
 1. Website 
 2. ReadSnese Api

Find The description and devlopement setup of each component in their respective readme files [Website](./website/README.md), [ReadSenseApi](./ReadSenseApi/README.md).

## Deployment
Currently this project is deployed to Azure Cloud. You can visit it using this url https://readsense.azurewebsites.net/

>Note: As we are using [Azure App Service](https://azure.microsoft.com/en-us/products/app-service) Free tier to deploy this website, azure will stop the server in case of long time inactivity, and it will start running again when we are trying to access the website. So sometimes, in this scenerio, it can take long time to load the website.

In the production deployment, we are using [Azure App Service](https://azure.microsoft.com/en-us/products/app-service) to deploy both website and ReadSensApi services. For database, we are using [Azure SQL Database for free](https://learn.microsoft.com/en-us/azure/azure-sql/database/free-offer?view=azuresql).

## Data

Below is the data structure for a User data stored by this application.

### User

An object containing all the data collected for a single user.

| Property Name  | Data Type  | Description  | Example  |
|---|---|---|---|
| id  | int  | user identifier unique number   | 1235  |
| devices  | Device[]  | A list of device information and corresponding usage data of the user  |   |

### Device

| Property Name  | Data Type  | Description  | Example  |
|---|---|---|---|
| id  | int  | device identifier unique number   | 1235  |
| fingerPrint  | string  | Unique fingerprint hash for the device. This is generated by [fingerprintjs](https://github.com/fingerprintjs/fingerprintjs)  | 78d2588c3969e2ff86600e47cd04c593  |
| deviceInfo | json  | Device details information generated by fingerprintjs. Contains information like browser details, device (mobile/tablet), OS, ScreenResolution, TouchSupport etc  |   |
| environments | Environment[] | A list of user's reading environment and corresponding reading data of that envoronment | |

### Environment

User Reading Environment
| Property Name  | Data Type  | Description  | Example  |
|---|---|---|---|
| id  | int  | Environment identifier unique number   | 1235  |
| placeState  | string  | Noise lebel of user reading environment  | Quiet, Chaotic  |
| location | string | User location while reading | Home, Transport, Outside  |
| brightnessLevel | string | Brightness level of reading environment | Dark, Dim, Bright |
| inserted | datetime | UTC timestamp  of when user provided this information | `2023-11-29T00:23:18.5933544+00:00` |
| readSettingsEvents | ReadSettingsEvent[] | List of reading settings change done by the user with additional metadata containing the reason of the said change. Each Settings Change event contains reading history (scrolling) associated with that change. This list is descending ordered by time Of Change ||

### ReadSettingsEvent

| Property Name  | Data Type  | Description  | Example  |
|---|---|---|---|
| id  | int  | ReadSettingsEvent identifier unique number   | 1235  |
| timeOfChange  | DataTime  | Time of change in UTC timestamp  |  `2023-11-29T00:24:15.8985284+00:00` |
| fontSize | json | Contains the old and new fontsize in `px`. If fontsize is not changed then it is `null`. |  `{ "old": 18, "new": 19, "reason": "hard_to_read" }` |
| fonts | json | Contains the old and new font family. If font is not changed then it is `null`. |  `{ "old": "Sans-serif", "new": "Serif", "reason": "preferred" }` |
| lineHeight | json | Contains the old and new line Height in `px`. If line Height is not changed then it is `null`. |  `{ "old": 18, "new": 20, "reason": "preferred" }` |
| lineSpacing | json | Contains the old and new line spacing in `px`. If line spacing is not changed then it is `null`. |  `{ "old": .1, "new": .5, "reason": "preferred" }` |
| align | json | Contains the old and new align value. If align is not changed then it is `null`. |  `{ "old": "left", "new": "justify", "reason": "preferred" }` |
| bookInfo | json | Contains unique identifier of the book user currently reading | `{ "id": 1 }` |
| settings | json | Contains all the reading settings values after this change was applied.   | `{ "fontSize": 18, "fonts": "serif", "lineHeight": 20, "lineSpacing": 0.1, "align": "justify", "layout": "row" }`|
| inserted | datetime | UTC timestamp  of when this data is saved to database | `2023-11-29T00:24:15.8985796+00:00` |
| scrollingEvents | ScrollingEvent[] | List of Scrolling Events in ascending order of time. Contains all scrolling reading history of the user done after this Read Settings was applied. ||

### ScrollingEvent

A Scrolling Event data

| Property Name  | Data Type  | Description  | Example  |
|---|---|---|---|
| id  | int  | Event identifier unique number   | 1235  |
| startPosition  | int | The Y coordinate of the top edge of the [viewport](https://developer.mozilla.org/en-US/docs/Glossary/Viewport) when the sroll started. See [Window: scrollY](https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollY)  | 8980  |
| startTime  | int | Scroll Start Time UTC. A number representing the timestamp, in milliseconds. See [Date](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date) in JS.  | `1701217502781`  |
| startPTagIndex  | int | It is the sereial number of the top most `p-tag` of the book which was visible to user when he/she started scrolling  | 269 |
| endPosition  | int | The Y coordinate of the top edge of the [viewport](https://developer.mozilla.org/en-US/docs/Glossary/Viewport) when the sroll ended. See [Window: scrollY](https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollY)  | 9579  |
| endTime  | int | Scroll End Time UTC. A number representing the timestamp, in milliseconds. See [Date](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date) in JS.  | `1701217503051`  |
| endPTagIndex  | int | It is the sereial number of the top most `p-tag` of the book which was visible to user when he/she ended scrolling  | 294 |
| bookId | int | Containts unique number indentifying the book user is currently reading | 2 |
